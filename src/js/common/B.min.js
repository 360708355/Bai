/**
 * 柏小白 Thu Jul 20 2017 11:05:53 GMT+0800 (中国标准时间)
 * https://github.com/360708355/B.js
 * @Version： v0.0.1
 * @Mail： 360708355@qq.com
 * @Link： http://web.xn--w0sz4as21fs7k.com/
 */
(function(){function e(e){var n={};for(var r in i)i.hasOwnProperty(r)&&!function(n,r){n[r]=function(n){return t.log(n,r,e)}}(n,r);return n}var t,n=this,r="",i={debug:10,info:20,warn:30,error:40};t={__BUILD_TIME:"2016-11-03",VERSION:"0.01",Env:{host:n},Config:{debug:!0,loggerLevel:"debug",fns:{}},is:function(e,t){var n={NaN:1,Infinity:1,"-Infinity":1};return t=t.toLowerCase(),"finite"==t?!n.hasOwnProperty(+e):"array"==t?e instanceof Array:void 0===e&&"undefined"!==t?!1:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||Object.prototype.toString.call(e).slice(8,-1).toLowerCase()==t},isBoolean:function(e){return t.is(e,"boolean")},isDate:function(e){return t.is(e,"date")},isRegExp:function(e){return t.is(e,"regexp")},isObject:function(e){return t.is(e,"object")},isArray:function(e){return t.is(e,"array")},isNumber:function(e){return t.is(e,"number")},isFunction:function(e){return t.is(e,"function")},isNull:function(e){return t.is(e,"null")},isString:function(e){return t.is(e,"string")},isEmpty:function(e){return r===e||t.isNull(e)},isUndefined:function(e){return t.is(e,"undefined")},log:function(e,n,r){if(!t.Config.debug)return void 0;if((i[t.Config.loggerLevel]||1e3)>i["log"==n?"debug":n])return"min level";var o=!1;return r&&(o=t.isObject(e),o||(e=r+": "+e)),"undefined"!=typeof console&&console.log?(o&&console[n&&console[n]?n:"log"](r+":"),console[n&&console[n]?n:"log"](e),e):void 0},getLogger:function(t){return e(t)},_mix:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}},t.Logger={},t.Logger.Level={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"},"B"in n||(n.B=t)}).call(this),function(e,t){var n=Array.prototype,r=n.indexOf,i=n.lastIndexOf,o=t,a=!1;e._mix(e,{each:function(t,n,r){if(t){var i,o,s,c=0,u=t&&t.length,f=e.isUndefined(u)||e.isFunction(t);if(r=r||null,f)for(s=e.keys(t);c<s.length&&(i=s[c],n.call(r,t[i],i,t)!==a);c++);else for(o=t[0];u>c&&n.call(r,o,c,t)!==a;o=t[++c]);}return t},index:function(e,t,n){if(r)return n===o?r.call(t,e):r.call(t,e,n);for(var i=n||0;i<t.length&&t[i]!==e;i++);return i},lastIndex:function(e,t,n){if(i)return n===o?i.call(t,e):i.call(t,e,n);n===o&&(n=t.length-1);for(var r=n;r>=0&&t[r]!==e;r--);return r},inArray:function(t,n){return e.index(t,n)>=0}})}(B),function(e){var t=Date.prototype;t.addDays=t.addDays||function(e){return this.setDate(this.getDate()+e),this};var n=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"];t.format=t.format||function(t){if("soon"===t||"week"===t){var r=this.left();if(r.dd<5){var i="",o=e.now().getDate()-this.getDate();if(0==r.dd&&0!=o&&(r.status=0>o,r.dd=1),r.dd>0){if(1==r.dd)return(r.status?"明天":"昨天")+this.format(" hh:mm");if("week"==t)return n[this.getDay()];i=r.dd+"天"}else if(r.hh>0)i=r.hh+"小时";else if(r.mm>0)i=r.mm+"分钟";else{if(!(r.ss>10))return"刚刚";i=r.ss+"秒"}return i+(r.status?"后":"前")}t="yyyy-MM-dd"}if("date"===t)return this;var a={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in a)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return t},t.left=function(){var e={status:!0},t=this-new Date;0>t&&(e.status=!1,t=Math.abs(t)),console.log(t);var n=t/864e5;e.dd=n>1?parseInt(n):0;var r=n-e.dd,i=24*r;return e.hh=i>1?parseInt(i):0,r=24*r-e.hh,i=60*r,e.mm=i>1?parseInt(i):0,r=60*r-e.mm,i=60*r,e.ss=i>1?parseInt(i):0,r=60*r-e.ss,i=1e3*r,e.ms=i>1?parseInt(i):0,e},e._mix(e,{nowTick:Date.now||function(){return+new Date},now:function(){return new Date(e.nowTick())},addDays:function(t,n){return e.isDate(t)?(n=e.isNumber(n)?n:0,new Date(t.addDays(n))):e.now()},formatDate:function(t,n){return e.isString(t)&&/Date\((\d+)\)/gi.test(t)&&(t=new Date(1*RegExp.$1)),e.isDate(t)?(n=n||"yyyy-MM-dd",t.format(n)):t},leftTime:function(e){return e.left()}})}(B),function(e){e._mix(e,{later:function(t,n,r,i,o){var a,s;return n=n||0,e.isString(t)&&(t=i[t]),t||e.error("fn is undefined"),s=function(){t.apply(i,o)},a=r?setInterval(s,n):setTimeout(s,n),{timer:a,isInterval:r,cancel:function(){this.isInterval?clearInterval(a):clearTimeout(a)}}}})}(B),function(e){function t(t,i,o,a,s,c){if(!i||!t)return i;var u,f,l,d;for(i[r]=t,c.push(i),l=e.keys(i),d=l.length,u=0;d>u;u++)f=l[u],f!==r&&n(f,t,i,o,a,s,c);return t}function n(n,i,o,a,s,c,u){if(a||!(n in i)||c){var f=i[n],l=o[n];if(f===l)return void(void 0===f&&(i[n]=f));if(s&&(l=s.call(o,n,l)),c&&l&&(e.isArray(l)||e.isObject(l)))if(l[r])i[n]=l[r];else{var d=f&&(e.isArray(f)||e.isObject(f))?f:e.isArray(l)?[]:{};i[n]=d,t(d,l,a,s,!0,u)}else void 0===l||!a&&n in i||(i[n]=l)}}var r="__MIX_CIRCULAR",i=!{toString:1}.propertyIsEnumerable("toString"),o=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];e._mix(e,{keys:Object.keys||function(e){var t,n,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(t);if(i)for(n=o.length-1;n>=0;n--)t=o[n],e.hasOwnProperty(t)&&r.push(t);return r},mix:function(n,i,o,a,s){if(o&&e.isObject(o)&&(a=o.whiteList,s=o.deep,o=o.overwrite),a&&!e.isFunction(a)){var c=a;a=function(t,n){return e.inArray(t,c)?n:void 0}}void 0===o&&(o=!0);var u,f=[],l=0;for(t(n,i,o,a,s,f);u=f[l++];)delete u[r];return n},clone:function(e){var t;t=e.constructor===Object?new e.constructor:new e.constructor(e.valueOf());for(var n in e)e.hasOwnProperty(n)&&t[n]!=e[n]&&("object"==typeof e[n]?t[n]=e[n].clone():t[n]=e[n]);return t.toString=e.toString,t.valueOf=e.valueOf,t}})}(B),function(e){var t=1e3,n=document,r=e.UA,i=n.getElementsByTagName("head")[0]||n.documentElement,o={};e._mix(e,{currentScript:function(){if(document.currentScript)return document.currentScript.src;var e;try{a.b.c()}catch(t){e=t.stack,!e&&window.opera&&(e=(String(t).match(/of linked script \S+/g)||[]).join(" "))}if(e)return e=e.split(/[@ ]/g).pop(),e="("==e[0]?e.slice(1,-1):e,e.replace(/(:\d+)?:\d+$/i,"");for(var n,r=document.getElementsByTagName("script"),i=0;n=r[i++];)if("interactive"===n.readyState)return n.className=n.src},loadScript:function(a,s,c){function u(){var e=v.readyState;e&&"loaded"!==e&&"complete"!==e||(v.onreadystatechange=v.onload=null,b(0))}var f,l,d,g,h,p=s,m=0;if(e.startsWith(e.ext(a).toLowerCase(),".css")&&(m=1),e.isObject(p)&&(s=p.success,f=p.error,l=p.attrs,d=p.timeout,c=p.charset),g=o[a]=o[a]||[],g.push([s,f]),g.length>1)return g.node;var v=n.createElement(m?"link":"script"),y=function(){h&&(h.cancel(),h=void 0)};l&&e.each(l,function(t,n){var r=n.toLowerCase();"async"!=r||e.isUndefined(v.async)?v.setAttribute(n,t):v.async=t}),c&&(v.charset=c),m?(v.href=a,v.rel="stylesheet"):(v.src=a,v.async=!0),g.node=v;var b=function(e){var t,n=e;y(),S.each(o[a],function(e){(t=e[n])&&t.call(v)}),delete o[a]},w="onload"in v,x=e.Config.forceCssPoll||r.webkit&&r.webkit<536;return m&&x&&w&&(w=!1),w?(v.onload=u,v.onerror=function(){v.onerror=null,b(1)}):m||(v.onreadystatechange=u),d&&(h=e.later(function(){b(1)},d*t)),m?i.appendChild(v):i.insertBefore(v,i.firstChild),v}})}(B),function(e,t){var n=/^[\s\xa0]+|[\s\xa0]+$/g,r=String.prototype.trim,i=/\\?\{([^{}]+)\}/g,o="";e._mix(e,{trim:function(t){return e.isEmpty(t)?t:r?r.call(t):(t+"").replace(n,o)},lengthCn:function(t){return e.isString(t)?t.replace(/[\u4e00-\u9fa5]/g,"**").length:0},subCn:function(t,n,r){if(e.lengthCn(t)<=n)return t.toString();for(var i=0;i<t.length;i++)if(e.lengthCn(t.substr(0,i))>=n)return t.substr(0,i)+(r||"...");return t},stripTags:function(e){return e.replace(/<\/?[^>]+>/gi,"")},stripScript:function(e){return e.replace(/<script[^>]*>([\\S\\s]*?)<\/script>/g,"")},isMobile:function(t){return/^(1[3578]\d{9})$/.test(e.trim(t))},isTelephone:function(t){return/((0[1-9]{2,3}[\s-]?)?\d{7,8})/gi.test(e.trim(t))},substitute:function(n,r,a){return e.isString(n)&&r?n.replace(a||i,function(e,n){return"\\"===e.charAt(0)?e.slice(1):r[n]===t?o:r[n]}):n},ucFirst:function(e){return e+="",e.charAt(0).toUpperCase()+e.substring(1)},startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n},format:function(t){if(arguments.length<=1)return t||o;var n,r=t;if(2===arguments.length&&e.isObject(arguments[1]))for(var i in arguments[1])arguments[1].hasOwnProperty(i)&&(n=new RegExp("\\{"+i+"\\}","gi"),r=r.replace(n,arguments[1][i]));else for(var a=1;a<arguments.length;a++)n=new RegExp("\\{"+(a-1)+"\\}","gi"),r=r.replace(n,arguments[a]);return r},padLeft:function(t,n,r){r=e.isUndefined(r)?"0":r;for(var i=String(t);i.length<n;)i=r+i;return i},padRight:function(t,n,r){r=e.isUndefined(r)?"0":r;for(var i=String(t);i.length<n;)i+=r;return i}})}(B),function(e){function t(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0===t++?".":""}))}function n(e,n){var r,i;n[r="trident"]=.1,(i=e.match(/Trident\/([\d.]*)/))&&i[1]&&(n[r]=t(i[1])),n.core=r}function r(e){var n,r;return(n=e.match(/MSIE ([^;]*)|Trident.*; rv(?:\s|:)?([0-9.]+)/))&&(r=n[1]||n[2])?t(r):0}function i(e){var i,o,s,c,u,f="",l=f,d=f,g=[6,9],h="{{version}}",p="<!--[if IE "+h+"]><s></s><![endif]-->",m=a&&a.createElement("div"),v=[],y={webkit:void 0,trident:void 0,gecko:void 0,presto:void 0,chrome:void 0,safari:void 0,firefox:void 0,ie:void 0,ieMode:void 0,opera:void 0,mobile:void 0,core:void 0,shell:void 0,phantomjs:void 0,os:void 0,ipad:void 0,iphone:void 0,ipod:void 0,ios:void 0,android:void 0,nodejs:void 0};if(m&&m.getElementsByTagName&&(m.innerHTML=p.replace(h,""),v=m.getElementsByTagName("s")),v.length>0){for(n(e,y),c=g[0],u=g[1];u>=c;c++)if(m.innerHTML=p.replace(h,c),v.length>0){y[d="ie"]=c;break}!y.ie&&(s=r(e))&&(y[d="ie"]=s)}else(o=e.match(/AppleWebKit\/([\d.]*)/))&&o[1]?(y[l="webkit"]=t(o[1]),(o=e.match(/OPR\/(\d+\.\d+)/))&&o[1]?y[d="opera"]=t(o[1]):(o=e.match(/Chrome\/([\d.]*)/))&&o[1]?y[d="chrome"]=t(o[1]):(o=e.match(/\/([\d.]*) Safari/))&&o[1]&&(y[d="safari"]=t(o[1])),/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)?(y.mobile="apple",o=e.match(/OS ([^\s]*)/),o&&o[1]&&(y.ios=t(o[1].replace("_","."))),i="ios",o=e.match(/iPad|iPod|iPhone/),o&&o[0]&&(y[o[0].toLowerCase()]=y.ios)):/ Android/i.test(e)?(/Mobile/.test(e)&&(i=y.mobile="android"),o=e.match(/Android ([^\s]*);/),o&&o[1]&&(y.android=t(o[1]))):(o=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(y.mobile=o[0].toLowerCase()),(o=e.match(/PhantomJS\/([^\s]*)/))&&o[1]&&(y.phantomjs=t(o[1]))):(o=e.match(/Presto\/([\d.]*)/))&&o[1]?(y[l="presto"]=t(o[1]),(o=e.match(/Opera\/([\d.]*)/))&&o[1]&&(y[d="opera"]=t(o[1]),(o=e.match(/Opera\/.* Version\/([\d.]*)/))&&o[1]&&(y[d]=t(o[1])),(o=e.match(/Opera Mini[^;]*/))&&o?y.mobile=o[0].toLowerCase():(o=e.match(/Opera Mobi[^;]*/))&&o&&(y.mobile=o[0]))):(s=r(e))?(y[d="ie"]=s,n(e,y)):(o=e.match(/Gecko/))&&(y[l="gecko"]=.1,(o=e.match(/rv:([\d.]*)/))&&o[1]&&(y[l]=t(o[1]),/Mobile|Tablet/.test(e)&&(y.mobile="firefox")),(o=e.match(/Firefox\/([\d.]*)/))&&o[1]&&(y[d="firefox"]=t(o[1])));return i||(/windows|win32/i.test(e)?i="windows":/macintosh|mac_powerpc/i.test(e)?i="macintosh":/linux/i.test(e)?i="linux":/rhino/i.test(e)&&(i="rhino")),y.os=i,y.core=y.core||l,y.shell=d,y.ieMode=y.ie&&a.documentMode||y.ie,y}var o=e.Env.host,a=o.document,s=o.navigator,c=s&&s.userAgent||"",u=e.UA=i(c);if("object"==typeof process){var f,l;(f=process.versions)&&(l=f.node)&&(u.os=process.platform,u.nodejs=t(l))}u.getDescriptorFromUserAgent=i}(B),function(e){var t=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;e._mix(e,{uri:function(e){var t,n=[];if(t=e?e+"":location.search,t.indexOf("?")>=0&&(t=t.substring(1),t=t.substring(1)),t&&(t=t.split("&")),t.length>0)for(var r=0;r<t.length;r++){var i=t[r].split("=");n[i[0]]=decodeURIComponent(i[1])}return n},cookie:{set:function(t,n,r,i){if("string"==typeof t&&""!==e.trim(t)){var o=t+"="+encodeURI(n);if("number"==typeof r&&r>0){var a=(new Date).getTime()+6e4*r;o+=";expires="+new Date(a).toGMTString()}"string"==typeof i&&(o+=";domain="+i),document.cookie=o+"; path=/"}},get:function(e){var t=document.cookie,n=e+"=",r=t.indexOf("; "+n);if(-1==r){if(r=t.indexOf(n),0!=r)return null}else r+=2;var i=t.indexOf(";",r);return-1==i&&(i=t.length),decodeURI(t.substring(r+n.length,i))},clear:function(e,t){this.get(e)&&(document.cookie=e+"="+(t?"; domain="+t:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT")}},ext:function(e){return(e.match(t)||[])[4]||""}})}(B);